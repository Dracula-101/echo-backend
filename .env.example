# ===================================
# Application Configuration
# ===================================
APP_ENV=development
APP_NAME=echo-backend
LOG_LEVEL=info
DEBUG=false

# ===================================
# PostgreSQL Configuration
# ===================================
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_USER=echo
POSTGRES_PASSWORD=echo_password
POSTGRES_DB=echo_db
POSTGRES_URL=postgres://echo:echo_password@localhost:5432/echo_db?sslmode=disable
POSTGRES_MAX_CONNECTIONS=100
POSTGRES_MAX_IDLE_CONNECTIONS=10
POSTGRES_CONN_MAX_LIFETIME=1h
POSTGRES_SSL_MODE=disable

# ===================================
# TimescaleDB (Analytics)
# ===================================
TIMESCALE_HOST=localhost
TIMESCALE_PORT=5433
TIMESCALE_USER=echo_analytics
TIMESCALE_PASSWORD=analytics_password
TIMESCALE_DB=echo_analytics
TIMESCALE_URL=postgres://echo_analytics:analytics_password@localhost:5433/echo_analytics?sslmode=disable

# ===================================
# Redis Configuration
# ===================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_URL=redis://localhost:6379/0
REDIS_POOL_SIZE=100
REDIS_MIN_IDLE_CONNS=10
REDIS_MAX_RETRIES=3
REDIS_DIAL_TIMEOUT=5s
REDIS_READ_TIMEOUT=3s
REDIS_WRITE_TIMEOUT=3s

# ===================================
# Kafka Configuration
# ===================================
KAFKA_BROKERS=localhost:9092
KAFKA_GROUP_ID=echo-backend
KAFKA_AUTO_OFFSET_RESET=earliest
KAFKA_COMPRESSION_TYPE=snappy
KAFKA_MAX_RETRY=3
KAFKA_RETRY_BACKOFF=100ms

# Kafka Topics
KAFKA_TOPIC_USER_EVENTS=user.events
KAFKA_TOPIC_MESSAGE_EVENTS=message.events
KAFKA_TOPIC_NOTIFICATION_EVENTS=notification.events
KAFKA_TOPIC_ANALYTICS_EVENTS=analytics.events
KAFKA_TOPIC_MEDIA_EVENTS=media.events

# ===================================
# Cloudflare R2 Configuration
# ===================================
R2_ACCOUNT_ID=your_r2_account_id
R2_ACCESS_KEY_ID=your_r2_access_key
R2_SECRET_ACCESS_KEY=your_r2_secret_key
R2_BUCKET_NAME=echo-media
R2_ENDPOINT=https://your_account_id.r2.cloudflarestorage.com
R2_PUBLIC_URL=https://cdn.echo.com
R2_REGION=auto

# ===================================
# Meilisearch Configuration
# ===================================
MEILI_HOST=http://localhost:7700
MEILI_MASTER_KEY=echo_search_key
MEILI_INDEX_PREFIX=echo_

# ===================================
# IP Location Database
# ===================================
IP_DB_HOST=localhost
IP_DB_PORT=5432
IP_DB_USER=echo
IP_DB_PASSWORD=echo_password
IP_DB_NAME=echo_db
IP_DB_REQUIRE_SSL=false
IP_DB_TIMEOUT=5s

# ===================================
# JWT Configuration
# ===================================
JWT_SECRET=your-secret-key-min-32-chars-required
JWT_REFRESH_SECRET=your-refresh-secret-key-min-32-chars
JWT_EXPIRY=24h
JWT_REFRESH_EXPIRY=168h
JWT_ISSUER=echo-backend
JWT_ALGORITHM=HS256

# ===================================
# Encryption Configuration
# ===================================
AES_ENCRYPTION_KEY=your-32-character-encryption-key
HMAC_SECRET_KEY=your-64-character-hmac-secret-key

# ===================================
# Service Ports - gRPC
# ===================================
AUTH_SERVICE_GRPC_PORT=50051
USER_SERVICE_GRPC_PORT=50052
MESSAGE_SERVICE_GRPC_PORT=50053
NOTIFICATION_SERVICE_GRPC_PORT=50054
PRESENCE_SERVICE_GRPC_PORT=50055
ANALYTICS_SERVICE_GRPC_PORT=50056
MEDIA_SERVICE_GRPC_PORT=50057

# ===================================
# Service Ports - HTTP
# ===================================
GATEWAY_PORT=8080
AUTH_SERVICE_HTTP_PORT=8081
USER_SERVICE_HTTP_PORT=8082
MESSAGE_SERVICE_HTTP_PORT=8083
MEDIA_SERVICE_HTTP_PORT=8084
NOTIFICATION_SERVICE_HTTP_PORT=8085
PRESENCE_SERVICE_HTTP_PORT=8086
ANALYTICS_SERVICE_HTTP_PORT=8087

# ===================================
# Service Ports - WebSocket
# ===================================
MESSAGE_SERVICE_WS_PORT=9000
PRESENCE_SERVICE_WS_PORT=9001

# ===================================
# Service Endpoints
# ===================================
AUTH_SERVICE_ENDPOINT=localhost:50051
USER_SERVICE_ENDPOINT=localhost:50052
MESSAGE_SERVICE_ENDPOINT=localhost:50053
NOTIFICATION_SERVICE_ENDPOINT=localhost:50054
PRESENCE_SERVICE_ENDPOINT=localhost:50055
ANALYTICS_SERVICE_ENDPOINT=localhost:50056
MEDIA_SERVICE_ENDPOINT=localhost:50057

# ===================================
# CORS Configuration
# ===================================
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001
ALLOWED_METHODS=GET,POST,PUT,PATCH,DELETE,OPTIONS
ALLOWED_HEADERS=Content-Type,Authorization,X-Request-ID
ALLOW_CREDENTIALS=true
MAX_AGE=3600

# ===================================
# Rate Limiting
# ===================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_DURATION=1m
RATE_LIMIT_BURST=20

# Auth specific rate limits
AUTH_RATE_LIMIT_REQUESTS=10
AUTH_RATE_LIMIT_DURATION=1m

# ===================================
# File Upload Limits
# ===================================
MAX_FILE_SIZE=52428800
MAX_IMAGE_SIZE=10485760
MAX_VIDEO_SIZE=104857600
MAX_AUDIO_SIZE=20971520
MAX_DOCUMENT_SIZE=10485760
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/gif,image/webp,video/mp4,video/quicktime,audio/mpeg,audio/ogg,application/pdf

# ===================================
# Media Processing
# ===================================
IMAGE_QUALITY=85
THUMBNAIL_WIDTH=150
THUMBNAIL_HEIGHT=150
MAX_IMAGE_WIDTH=2048
MAX_IMAGE_HEIGHT=2048
VIDEO_COMPRESSION_QUALITY=medium

# ===================================
# GCP Configuration
# ===================================
GCP_PROJECT_ID=your-gcp-project-id
GCP_REGION=us-central1
GCP_CREDENTIALS_PATH=/path/to/service-account-key.json

# ===================================
# Firebase/FCM Configuration
# ===================================
FCM_CREDENTIALS_PATH=/path/to/fcm-credentials.json
FCM_PROJECT_ID=your-firebase-project-id
APNS_KEY_PATH=/path/to/apns-key.p8
APNS_KEY_ID=your-apns-key-id
APNS_TEAM_ID=your-team-id
APNS_BUNDLE_ID=com.echo.app

# ===================================
# Email Configuration
# ===================================
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=noreply@echo.com
SMTP_PASSWORD=your-smtp-password
SMTP_FROM=Echo Backend <noreply@echo.com>
EMAIL_TEMPLATES_PATH=/path/to/templates

# ===================================
# SMS Configuration (GCP)
# ===================================
GCP_SMS_ENABLED=false
GCP_SMS_PROJECT_ID=your-project-id

# ===================================
# Monitoring & Observability
# ===================================
PROMETHEUS_PORT=9090
PROMETHEUS_PATH=/metrics
JAEGER_ENDPOINT=http://localhost:14268/api/traces
JAEGER_SERVICE_NAME=echo-backend
JAEGER_SAMPLER_TYPE=probabilistic
JAEGER_SAMPLER_PARAM=0.1
OTEL_ENABLED=true

# Grafana
GRAFANA_URL=http://localhost:3000
GRAFANA_ADMIN_PASSWORD=admin

# ===================================
# Security
# ===================================
ENABLE_HTTPS=false
TLS_CERT_PATH=/path/to/cert.pem
TLS_KEY_PATH=/path/to/key.pem
TRUSTED_PROXIES=127.0.0.1

# ===================================
# Session Configuration
# ===================================
SESSION_TIMEOUT=30m
SESSION_MAX_LIFETIME=24h
MAX_CONCURRENT_SESSIONS=5

# ===================================
# WebSocket Configuration
# ===================================
WS_READ_BUFFER_SIZE=1024
WS_WRITE_BUFFER_SIZE=1024
WS_MAX_MESSAGE_SIZE=65536
WS_PING_INTERVAL=30s
WS_PONG_TIMEOUT=10s
WS_WRITE_TIMEOUT=10s

# ===================================
# Background Jobs
# ===================================
WORKER_POOL_SIZE=10
WORKER_QUEUE_SIZE=1000
JOB_TIMEOUT=5m
JOB_MAX_RETRIES=3

# ===================================
# Cache Configuration
# ===================================
CACHE_DEFAULT_TTL=1h
CACHE_USER_TTL=30m
CACHE_SESSION_TTL=24h
CACHE_TOKEN_TTL=15m

# ===================================
# Feature Flags
# ===================================
FEATURE_USER_REGISTRATION=true
FEATURE_EMAIL_VERIFICATION=true
FEATURE_TWO_FACTOR_AUTH=false
FEATURE_SOCIAL_LOGIN=false
FEATURE_LOCATION_TRACKING=true
FEATURE_END_TO_END_ENCRYPTION=true
FEATURE_MESSAGE_REACTIONS=true
FEATURE_TYPING_INDICATORS=true
FEATURE_READ_RECEIPTS=true
FEATURE_FILE_ATTACHMENTS=true
FEATURE_VOICE_MESSAGES=true
FEATURE_VIDEO_CALLS=false

# ===================================
# Analytics Configuration
# ===================================
ANALYTICS_ENABLED=true
ANALYTICS_BATCH_SIZE=100
ANALYTICS_FLUSH_INTERVAL=10s
ANALYTICS_RETENTION_DAYS=90

# ===================================
# Moderation Configuration
# ===================================
MODERATION_ENABLED=true
PERSPECTIVE_API_KEY=your-perspective-api-key
AUTO_MODERATION_THRESHOLD=0.8

# ===================================
# Backup Configuration
# ===================================
BACKUP_ENABLED=true
BACKUP_INTERVAL=24h
BACKUP_RETENTION_DAYS=30
BACKUP_STORAGE_PATH=/backups

# ===================================
# Development/Testing
# ===================================
MOCK_EXTERNAL_SERVICES=false
ENABLE_SWAGGER=true
SWAGGER_HOST=localhost:8080
ENABLE_PPROF=false
PPROF_PORT=6060
